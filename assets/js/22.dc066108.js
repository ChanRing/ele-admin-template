(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{268:function(t,a,s){"use strict";s.r(a);var e=s(29),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"路由与权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由与权限"}},[t._v("#")]),t._v(" 路由与权限")]),t._v(" "),s("h2",{attrs:{id:"路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),s("p",[t._v("这里的路由分为两种，"),s("code",[t._v("constantRoutes")]),t._v("和"),s("code",[t._v("asyncRoutes")]),t._v(".\nconstantRoutes: 代表那些不需要判断权限的路由，比如登录页、404 等通用页面\nasyncRoutes: 代表那些需要动态判断权限并且通过 addRoutes 动态添加的页面")]),t._v(" "),s("h2",{attrs:{id:"路由懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由懒加载"}},[t._v("#")]),t._v(" 路由懒加载")]),t._v(" "),s("p",[t._v("当打包构建应用时，JavaScript 包会变得非常大，影响页面加载速度（首屏）。如果我们能把不同路由对应的组件分割成不同的代码块，当路由被访问时才加载对应组件。这样就更加高效了。\n结合 Vue 的异步组件和 webpack 的代码分割功能，轻松实现路由组件的懒加载")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Foo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pathto/Foo.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"vue-cli3-方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli3-方案"}},[t._v("#")]),t._v(" @vue/cli3 方案")]),t._v(" "),s("p",[t._v("由于项目是使用@vue/cli3 来构建的，在新版中你只需要在.env.development 环境变量配置文件中设置"),s("code",[t._v("VUE_CLI_BABEL_TRANSPILE_MODULES = true")]),t._v("就可以了。\n它的实现原理是基于"),s("code",[t._v("babel-plugin-dynamic-import-node")]),t._v("来实现的。")]),t._v(" "),s("h2",{attrs:{id:"路由文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由文件"}},[t._v("#")]),t._v(" 路由文件")]),t._v(" "),s("p",[t._v("路由文件按照功能/模块划分，在"),s("code",[t._v("router/index.js")]),t._v("中统一导入")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("|-- modules\n|  |-- modulesA.js     # 模块A的路由\n|  |-- modulesB.js     # 模块B的路由\n|-- index.js           # 创建Router\n")])])]),s("h3",{attrs:{id:"路由权限控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由权限控制"}},[t._v("#")]),t._v(" 路由权限控制")]),t._v(" "),s("p",[t._v("这里暂时想到有两个办法实现：")]),t._v(" "),s("ol",[s("li",[t._v("通过过滤权限 routes，并且 addRoutes 动态生成路由")]),t._v(" "),s("li",[t._v("使用 router.beforeEach 来拦截没有权限的页面，将其转到 404 或者 403 页面。")])])])}),[],!1,null,null,null);a.default=r.exports}}]);